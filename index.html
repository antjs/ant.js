<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="chrome=1" />
	<title>Ant.js - 轻量级 MDV</title>
  
  <link rel="stylesheet" href="css/styles.css" />
  <link rel="stylesheet" href="css/pygment_trac.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
	<div class="wrapper">
  <header id="nav">
    <h4><a href="http://antjs.org">Ant.js <span class="version">(0.1.0)</span></a></h4>
    <ul class="sections">
      <li>» <a href="https://github.com/antjs/ant.js">Github 上的 ant.js</a></li>
      <li>» <a href="learn">学习 ant.js</a></li>
    </ul>
    <ul class="sections"><h4><a href="#%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95">模板语法</a></h4><ul><li><a href="#%E5%8F%98%E9%87%8F%E5%8D%A0%E4%BD%8D%E7%AC%A6">变量占位符</a></li><li><a href="#%E6%9D%A1%E4%BB%B6%E5%B1%9E%E6%80%A7">条件属性</a></li><li><a href="#%E5%BE%AA%E7%8E%AF%E5%B1%9E%E6%80%A7">循环属性</a></li><li><a href="#%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7">双向绑定属性</a></li><li><a href="#%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F">条件变量</a></li><li><a href="#%E9%9D%9E%E8%BD%AC%E4%B9%89%20html">非转义 HTML</a></li><li><a href="#%E5%AD%90%E6%A8%A1%E6%9D%BF">子模板</a></li></ul><h4><a href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%20ant">构造函数 Ant</a></h4><ul><li><a href="#new%20ant(template%5B%2C%20options%5D)">new Ant(template[, options])</a></li><li><a href="#ant.extend(prototypeproperties%5B%2C%20staticproperties%5D)">Ant.extend(prototypeProperties[, staticProperties])</a></li></ul><h4><a href="#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95%3A">实例方法:</a></h4><ul><li><a href="#.get(keypath)">.get(keypath)</a></li><li><a href="#.set(keypath%5B%2C%20val%2C%20opts%5D)">.set(keypath[, val, opts])</a></li><li><a href="#.render(%5Bdata%5D)">.render([data])</a></li><li><a href="#.update(%5Bkeypath%2C%20data%2C%20isextend%5D)">.update([keyPath, data, isExtend])</a></li><li><a href="#.clone(%5Bopts%5D)">.clone([opts])</a></li><li><a href="#.parse(data%5B%2C%20opts%5D)">.parse(data[, opts])</a></li><li><a href="#.fetch(opts)">.fetch(opts)</a></li><li><a href="#.on(eventname%2C%20callback)">.on(eventName, callback)</a></li><li><a href="#.off(eventname%5B%2C%20callback%5D)">.off(eventName[, callback])</a></li><li><a href="#.trigger(eventname%5B%2C%20extraparameters%20%5D)">.trigger(eventName[, extraParameters ])</a></li><li><a href="#.init(tpl%5B%2C%20options%5D)">.init(tpl[, options])</a></li><li><a href="#.setpartial(info)">.setPartial(info)</a></li></ul><h4><a href="#%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7%3A%20">实例属性: </a></h4><ul><li><a href="#.el">.el</a></li><li><a href="#.template">.template</a></li><li><a href="#.data">.data</a></li><li><a href="#.options">.options</a></li><li><a href="#.isrendered">.isRendered</a></li></ul></ul>
  </header>
  <section id="content">
    <h1>Ant.js <span class="version">(0.1.0)</span></h1>
    <h2 id="%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95">模板语法</h2>
<p>  Ant 的模板语法参考了 <a href="http://mustache.github.io/mustache.5.html">mustache</a> 和 <a href="http://www.polymer-project.org/platform/template.html">polymer</a>, 但是又有起自己的特点. Ant 模板可以是 DOM 对象, 也可以是一段 HTML 字符串. 模板 DOM 对象的根节点不应该包含 <code>a-if</code> 和 <code>a-repeat</code> 属性.</p>
<p>  一个典型的 ant 模板:</p>
<pre><code class="lang-html"><div class="highlight"><pre><span class="nt">&lt;section</span> <span class="na">id=</span><span class="s">"main"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">a-model=</span><span class="s">'completedAll'</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">a-if=</span><span class="s">"todos.length"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">"todo-list"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li</span> <span class="na">a-repeat=</span><span class="s">"todos"</span> <span class="na">a-if=</span><span class="s">"show"</span> <span class="na">class=</span><span class="s">"{{completed: completed}}"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"view"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"checkbox"</span> <span class="na">class=</span><span class="s">"toggle"</span> <span class="na">a-model=</span><span class="s">"completed"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;label&gt;</span>{{{title}}}<span class="nt">&lt;/label&gt;</span>
        <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"destroy"</span><span class="nt">&gt;&lt;/button&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">a-model=</span><span class="s">"title"</span> <span class="na">class=</span><span class="s">"edit"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;/section&gt;</span>
</pre></div>
</code></pre>
<h3 id="%E5%8F%98%E9%87%8F%E5%8D%A0%E4%BD%8D%E7%AC%A6">变量占位符</h3>
<p>  <code>{{name}}</code></p>
<p>  两组大括号表示普通变量. 变量占位符只能位于文本节点和属性节点当中, 属性节点包括属性名和属性值. 深度变量用点表示法表示, 如: <code>{{todos.length}}</code></p>
<h3 id="%E6%9D%A1%E4%BB%B6%E5%B1%9E%E6%80%A7">条件属性</h3>
<p>  <code>a-if="val"</code></p>
<p>  有 <code>a-if</code> 属性的节点会根据 <code>a-if</code> 属性的值对应的数据来决定该节点是否存在于 DOM 书中.</p>
<p>  如模板: </p>
<pre><code><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">ul</span> <span class="nx">a</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">"todos.length"</span><span class="o">&gt;&lt;</span><span class="nx">ul</span><span class="o">&gt;</span>
</pre></div>
</code></pre>
<p>  对应数据 <code>{todos: []}</code>, 由于 <code>todos</code> 数组的长度为零, 所以该 list 将不会出现在 DOM 树中.</p>
<p>  <strong>如果不是</strong>. <code>^</code> 标示符和条件属性配合使用时, 值的 true false 与 DOM 的显示与否刚好相反. </p>
<p>  如:</p>
<pre><code><div class="highlight"><pre><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">a</span><span class="o">-</span><span class="k">if</span><span class="o">=</span><span class="s2">"^todos.length"</span><span class="o">&gt;</span><span class="err">对不起</span><span class="o">!</span> <span class="err">没有数据</span><span class="o">&lt;</span><span class="err">/div&gt;</span>
</pre></div>
</code></pre>
<p>  对应数据 <code>{todos: []}</code>, 当 <code>todos</code> 数组的长度为零时该节点将会显示.</p>
<h3 id="%E5%BE%AA%E7%8E%AF%E5%B1%9E%E6%80%A7">循环属性</h3>
<p>  <code>a-repeat="list"</code></p>
<p>  <code>a-repeat</code> 属性表示元素将根据对应数组的长度而重复. 并且该元素及其子元素的变量应用作用域将会切换到, 数组数据当中. 想使用数组之外的父辈变量, 直接使用其变量名即可.</p>
<p>  每个重复节点生成的时候会被添加一个名为 <code>data-a-index</code> 的 HTML 属性, 其值是元素在数组中的索引.</p>
<p>  如对于模板:</p>
<pre><code class="lang-html"><div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">a-repeat=</span><span class="s">"todos"</span><span class="nt">&gt;</span>
    {{title}}
  <span class="nt">&lt;li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</code></pre>
<p>  其对应的数据为:</p>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="p">{</span>
  <span class="nx">todos</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nx">title</span><span class="o">:</span> <span class="s1">'买早餐'</span><span class="p">}</span>
  <span class="p">,</span> <span class="p">{</span><span class="nx">title</span><span class="o">:</span> <span class="s1">'吃早餐'</span><span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</code></pre>
<p>  最终将会渲染成:</p>
<pre><code class="lang-html"><div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">data-a-index=</span><span class="s">'0'</span><span class="nt">&gt;</span>买早餐<span class="nt">&lt;/li&gt;</span>
  <span class="nt">&lt;li</span> <span class="na">data-a-index=</span><span class="s">'1'</span><span class="nt">&gt;</span>吃早餐<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</code></pre>
<h3 id="%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7">双向绑定属性</h3>
<p>  <code>a-model="val"</code></p>
<p>  对于大部分表单控件, 加上 <code>a-model</code> 属性就表示该表单控件的值与某条数据想绑定了. </p>
<p>  而所谓的双向绑定, 即是在数据和表单值中任何一个发生了变化, 都会将该变化自动更新到另一层中.</p>
<p>  对于表单元素的绑定值, 目前分为 4 种情况: </p>
<ol>
<li><p>对于普通的文本输入框如 <code>input:text</code>, <code>textarea</code> 等, 与 <code>a-model</code> 绑定的只是其 <code>value</code> 属性.</p>
</li>
<li><p>复选框 <code>&lt;input type='checkbox' a-model='somekey' /&gt;</code>. 与 <code>a-model</code> 绑定的是其选中状态. 即: 当用户选中时, 'somekey' 对应的值将会被设置成 <code>true</code>, 反之为 <code>false</code>.</p>
</li>
<li><p>单选框 </p>
<pre><code class="lang-html"><div class="highlight"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">radio</span> <span class="na">value=</span><span class="s">red,</span> <span class="na">a-model=</span><span class="s">color</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">radio</span> <span class="na">value=</span><span class="s">blue,</span> <span class="na">a-model=</span><span class="s">color</span> <span class="nt">/&gt;</span>
</pre></div>
</code></pre>
<p>单选框往往是一组出现的, 同一组单选框应该有同一个 <code>a-model</code>, 与 <code>a-model</code> 绑定的是当前选中单选框的 <code>value</code> 值. 如: 用户选中 <code>value=red</code> 的单选框时, <code>color</code> 的值将设成 <code>red</code>.</p>
</li>
<li><p>下拉框</p>
<pre><code class="lang-html"><div class="highlight"><pre><span class="nt">&lt;select</span> <span class="na">a-model=</span><span class="s">'select'</span><span class="nt">&gt;</span>
 <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">'option1'</span><span class="nt">&gt;</span>option1<span class="nt">&lt;/option&gt;</span>
 <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">'option2'</span><span class="nt">&gt;</span>option2<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
<span class="nt">&lt;select</span> <span class="na">a-model=</span><span class="s">'selects'</span> <span class="na">multiple=</span><span class="s">'true'</span><span class="nt">&gt;</span>
 <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">'option1'</span><span class="nt">&gt;</span>option1<span class="nt">&lt;/option&gt;</span>
 <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">'option2'</span><span class="nt">&gt;</span>option2<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</pre></div>
</code></pre>
<p>select 控件分为单选和多选. 单选下拉列表绑定的数据是其选中 option 元素的 value 值.</p>
<p>多选的下拉框, 其绑定的数据是包含所有选中 option 元素 value 值的数组.</p>
</li>
</ol>
<h3 id="%E6%9D%A1%E4%BB%B6%E5%8F%98%E9%87%8F">条件变量</h3>
<p>  <code>{{val: str}}</code></p>
<p>  条件变量可以根据数据中某个值得真假来决定 DOM 中是否出现另一个字符. </p>
<p>  比如对于<code>{{val: str}}</code>标记, 如果数据中, <code>val</code> 为真的话, 该段标记将显示成 <code>str</code> 字符, 如果 <code>val</code> 为假, 该段标记则表示一个空字符串.</p>
<p>  类似于 <code>a-if</code> 属性, <code>^</code> 标记表示反向. <code>{{^val: str}}</code></p>
<h3 id="%E9%9D%9E%E8%BD%AC%E4%B9%89%20html">非转义 HTML</h3>
<p>  <code>{{{unescapeHTML}}}</code></p>
<p>  三组大括号 <code>{{{unescapeHTML}}}</code> 表示里边的数据不会被转义, 就是说如果数据中包含 HTML 标签, 则会被当做 DOM 节点解析出来.</p>
<h3 id="%E5%AD%90%E6%A8%A1%E6%9D%BF">子模板</h3>
<p>  <code>{{&gt; partial}}</code></p>
<p>  占位符 <code>{{&gt; partialName}}</code> 表示该处将插入子模板 partialName 中的内容. partialName 与 <code>ant.optioins.partials</code> 中的值对应. </p>
<p>  当子模板内容是字符串时, <code>{{{&gt;partialName}}}</code>将不转义该字符串. 如果字符串中包含 HTML 标签, 将解析成 DOM 节点. 子模板是一个 DOM 节点时, 则将忽略非转义选项.</p>
<h2 id="%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%20ant">构造函数 Ant</h2>
<p>  构造一个 Ant 实例. </p>
<h3 id="new%20ant(template%5B%2C%20options%5D)">new Ant(template[, options])</h3>
<p>  返回值: <code>ant</code> 实例</p>
<ul>
<li><p><strong>template</strong> <code>String | HTMLElement</code></p>
<p>模板必须是 DOM 对象或者是可以转换成合法 DOM 对象的 HTML 字符串. 如果是一个 DOM 对象, 则该元素不应包含 <code>a-repeat</code> 或 <code>a-if</code> 属性.</p>
</li>
<li><p><strong>options</strong> <code>Object</code></p>
<p>所有的配置参数都是可省略的.</p>
<ul>
<li><p><strong>options.data</strong> <code>Object</code>   </p>
<p>与模板对应的数据对象. Data 如果缺省, 可以在稍后用 <code>ant.render(data)</code> 延时传入.</p>
</li>
<li><p><strong>options.partials</strong> <code>Object</code></p>
<p>子模板集合. 一个子模板可以字符串或 DOM 对象.</p>
<p>如: </p>
<p>HTML 代码: </p>
<pre><code class="lang-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">template</span><span class="nt">&gt;</span>
  <span class="nt">&lt;h1&gt;</span>标题<span class="nt">&lt;/h1&gt;</span>
  {{&gt; content}}
<span class="nt">&lt;div&gt;</span>
</pre></div>
</code></pre>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="k">new</span> <span class="nx">Ant</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'template'</span><span class="p">),</span> <span class="p">{</span>
  <span class="nx">partials</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">content</span><span class="o">:</span> <span class="s1">'&lt;p&gt;{{contents}}&lt;/p&gt;'</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</code></pre>
</li>
<li><p><strong>options.lazy</strong> <code>Boolean</code> </p>
<p>默认值是 false. 表单元素与数据双向绑定时, 该参数决定了用户更改表单元素的值时更新到数据层的时机. False 时, 用户在 <code>input textarea</code> 中输入时会立即更新到数据层, 监听的是元素的 <code>input</code> 事件. True 时, 用户的输入只有在表单元素丢失焦点是才会更新到数据层, 即监听的是 <code>change</code> 事件.</p>
</li>
<li><p><strong>options.el</strong> <code>String|Object</code></p>
<p>模板在 DOM 的目标对象. 如果是字符串则表示一个新的标签元素名(如: <code>div, p, ul</code> 等). 该参数和模板有 6 种组合情况: </p>
<ol>
<li>模板是一个 DOM 对象, <code>options.el</code> 为空, 则 <code>ant.el</code> 就是模板对象</li>
<li>模板是一个 DOM 对象, <code>options.el</code> 为另一个 DOM 节点, 则 <code>ant.el</code> 表示 <code>options.el</code>, 并且模板对象将被插入 到 <code>options.el</code> 中</li>
<li>模板是一个 DOM 对象, <code>options.el</code> 为一个字符串, 则新建一个标签名为 <code>options.el</code> 的标签元素, 并将模板对象插入到 <code>options.el</code> 中.</li>
<li>模板是字符串, <code>options.el</code> 为空, 则会新建一个 div 表示 <code>ant.el</code>, 其 innerHTML 是模板字符串</li>
<li>模板是字符串, <code>options.el</code> 是一个 DOM 元素, 则 <code>options.el</code> 表示 <code>ant.el</code>, 其 innerHTML 是模板字符串</li>
<li>模板是字符串, <code>options.el</code> 也是一个字符串, 则会新建一个标签名为 <code>options.el</code> 的元素与表示 <code>ant.el</code>, 其 innnerHTML 是模板字符串</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="ant.extend(prototypeproperties%5B%2C%20staticproperties%5D)">Ant.extend(prototypeProperties[, staticProperties])</h3>
<p>  构造函数的扩展. 可以扩展 Ant 的原型对象来为实例提供属性和方法, 也可以直接扩展构造函数的静态方法.</p>
<ul>
<li><p><strong>prototypeProperties</strong> <code>Object</code></p>
<p>扩展的原型对象.</p>
</li>
<li><p><strong>staticProperties</strong> <code>Object</code></p>
<p>扩展的静态方法.</p>
<p>如:</p>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">Comment</span> <span class="o">=</span> <span class="nx">Ant</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">addReply</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">reply</span><span class="p">){</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'replys'</span><span class="p">).</span><span class="nx">push</span><span class="p">(</span><span class="nx">reply</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">var</span> <span class="nx">CommentAdmin</span> <span class="o">=</span> <span class="nx">Comment</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span>
  <span class="nx">removeReply</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//...</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</code></pre>
</li>
</ul>
<h2 id="%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95%3A">实例方法:</h2>
<h3 id=".get(keypath)">.get(keypath)</h3>
<p>  获取数据中 <em>keypath</em> 对应的值.</p>
<ul>
<li><p><strong>keypath</strong> <code>String</code></p>
<p><em>Keypath</em> 表示数据在集合中的键值路径, 可用下标标示法和点标示法.</p>
<p>如:</p>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">ant</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Ant</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">'标题'</span>
  <span class="p">,</span> <span class="nx">lists</span><span class="o">:</span> <span class="p">[{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">'作者'</span><span class="p">}]</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">ant</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'title'</span><span class="p">);</span>
<span class="nx">ant</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'list.0.name'</span><span class="p">);</span>
<span class="nx">ant</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'list[0].name'</span><span class="p">);</span>
</pre></div>
</code></pre>
</li>
</ul>
<h3 id=".set(keypath%5B%2C%20val%2C%20opts%5D)">.set(keypath[, val, opts])</h3>
<p>  更新到 keypath 对应的值. </p>
<ul>
<li><p><strong>keypath</strong> <code>String|Object</code></p>
<p>需要更新的键值路径. 当一个参数是一个对象的时候, 则会将该对象并入数据中.</p>
</li>
<li><p><strong>val</strong> <code>AnyType</code></p>
<p>需要更新的值. </p>
</li>
<li><p><strong>opts</strong> <code>Object</code></p>
<ul>
<li><p><strong>opts.silence</strong> <code>Boolean</code></p>
<p>默认情况下, 设置一个新值会立即更新模板, 并会触发 <code>update</code> 事件. 该值为 <code>true</code> 的时候, 将不会更新模板, 只会安静的更改 <code>ant.data</code> 中对应的值.</p>
</li>
<li><p><strong>opts.isExtend</strong> <code>Boolean</code></p>
<p>扩展数据还是替换数据:</p>
<ol>
<li>为 true 时, 新传入的数据将会扩展原有数据, 只会替换简单类型数据.</li>
<li>为 false 是, 将会替换原有同路径的数据.</li>
</ol>
<p>该参数的默认值取决于第一个参数: 第一个参数是数据路径是该值默认为 false, 而第一个数据是数据对象的时候则默认为 true.</p>
</li>
</ul>
</li>
</ul>
<p>  如, 对于已有数据的示例:</p>
<pre><code class="lang-javascript"><div class="highlight"><pre><span class="nx">ant</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">title</span><span class="o">:</span> <span class="s1">'Be cool'</span>
<span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">name</span><span class="o">:</span> <span class="s1">'Dylan'</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</code></pre>
<p>  对其进行 <code>set</code> :</p>
<pre><code><div class="highlight"><pre><span class="nx">ant</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'author'</span><span class="p">,</span> <span class="p">{</span><span class="nx">age</span><span class="o">:</span> <span class="mi">1</span><span class="p">});</span><span class="c1">//替换 'author' 的值. ant.data 为: {title: 'Be cool', author: {age: 1}}</span>
<span class="nx">ant</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">author</span><span class="o">:</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">'Ant'</span><span class="p">,</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">2</span><span class="p">}});</span><span class="c1">//扩展整个数据对象. ant.data 为: {title: 'Be cool', author: {name: 'Ant', age: 2}}</span>
<span class="nx">ant</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'author'</span><span class="p">,</span> <span class="p">{</span><span class="nx">country</span><span class="o">:</span> <span class="s1">'CN'</span><span class="p">},</span> <span class="kc">true</span><span class="p">)</span><span class="c1">//扩展 'author'. ant.data 的值: {title: 'Be cool', author: {name: 'Ant', age: 2, contry: 'CN'}}</span>
<span class="nx">ant</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span><span class="nx">newObj</span><span class="o">:</span> <span class="p">{},</span> <span class="nx">title</span><span class="o">:</span> <span class="s1">'Matrix'</span><span class="p">})</span><span class="c1">//完全替换原有 'ant.data'. ant.data 的值为: {newObj: {}, title: 'Matrix'}</span>
</pre></div>
</code></pre>
<h3 id=".render(%5Bdata%5D)">.render([data])</h3>
<p>  如果初始化构造的时候没有传入数据, 可用该方法进行数据绑定. 触发 <code>render</code> 事件.</p>
<ul>
<li><strong>data</strong> <code>Object</code> 需要与模板绑定的数据.</li>
</ul>
<h3 id=".update(%5Bkeypath%2C%20data%2C%20isextend%5D)">.update([keyPath, data, isExtend])</h3>
<p>  直接用数据更新局部或者全部模板, 并且不更新数据层. 触发 <code>update</code> 事件.</p>
<p>  参数同 <code>set</code> 方法.</p>
<h3 id=".clone(%5Bopts%5D)">.clone([opts])</h3>
<p>  拷贝当前 ant 实例对象.</p>
<ul>
<li><p><strong>opts</strong> <code>Object</code></p>
<p>扩展参数.</p>
</li>
</ul>
<h3 id=".parse(data%5B%2C%20opts%5D)">.parse(data[, opts])</h3>
<p>  数据预处理. 原始的数据往往需要经过修饰才适合展示在界面中. 该方法就是用来完成数据的适配工作. </p>
<h3 id=".fetch(opts)">.fetch(opts)</h3>
<p>  通过调用 <code>ZUI.ajax(opts)</code> 来同步服务器的数据.</p>
<h3 id=".on(eventname%2C%20callback)">.on(eventName, callback)</h3>
<p>  监听 ant 的事件或自定义事件.</p>
<ul>
<li><p><strong>eventName</strong> <code>String</code> 事件名</p>
<p>Ant 自带事件包括: <code>render, update</code>. </p>
</li>
<li><p><strong>callback</strong> <code>Function</code> 事件回调</p>
</li>
</ul>
<h3 id=".off(eventname%5B%2C%20callback%5D)">.off(eventName[, callback])</h3>
<p>  取消事件的监听</p>
<h3 id=".trigger(eventname%5B%2C%20extraparameters%20%5D)">.trigger(eventName[, extraParameters ])</h3>
<p>  手动触发事件.</p>
<ul>
<li><p><strong>eventName</strong> <code>String</code> 事件名.</p>
</li>
<li><p><strong>extraParameters</strong> <code>AnyType</code> </p>
<p>所有的附加参数都会传递给事件监听函数.</p>
</li>
</ul>
<h3 id=".init(tpl%5B%2C%20options%5D)">.init(tpl[, options])</h3>
<p>  每个实例创建时都会调用该初始化函数. 其参数同构造函数参数.</p>
<h3 id=".setpartial(info)">.setPartial(info)</h3>
<p>  添加或者更改子模板. 根据 <code>ant.isRendered</code> 数据, 决定该子模板是否渲染.</p>
<p>  该方法对于添加延时加载的子模板非常有用.</p>
<ul>
<li><strong>info.content</strong> <code>String|HTMLElement</code> 子模板内容</li>
<li><strong>[info.name]</strong> <code>String</code> 子模板标示符. 对应模板中 <code>{{&gt;partialName}}</code>. 没有预定义子模板, 该项可省略.</li>
<li><strong>[info.node]</strong> <code>HTMLElement</code> 子模板的目标节点. 对于预定义好的子模板, 该项可省略.</li>
<li><strong>[info.escape]</strong> <code>Boolean</code> 是否转义字符串子模板</li>
<li><strong>[info.path]</strong> <code>String</code> 指定子模板中变量在数据中的作用域</li>
</ul>
<h2 id="%E5%AE%9E%E4%BE%8B%E5%B1%9E%E6%80%A7%3A%20">实例属性: </h2>
<h3 id=".el">.el</h3>
<p>  <code>HTMLELement</code></p>
<p>  所有的 Ant 实例对象都有一个 <code>el</code> 属性来表示该模板的 DOM 对象. 该对象是与构造函数接收的一个参数相关联的: 如果构造函数接收了一个 DOM 对象, 那 <code>el</code> 属性就是指代它; 如果传入构造器的是 HTML 字符串, 那么 <code>el</code> 就是有该字符串生成的 DOM 对象.</p>
<h3 id=".template">.template</h3>
<p>  <code>String</code></p>
<p>  <code>.el</code> 对象对应的原始模板字符串</p>
<h3 id=".data">.data</h3>
<p>  <code>Object</code></p>
<p>  模板对象绑定的数据.</p>
<h3 id=".options">.options</h3>
<p>  <code>Object</code></p>
<p>  对应传入构造函数的第二个参数.</p>
<h3 id=".isrendered">.isRendered</h3>
<p>  <code>Boolean</code></p>
<p>  该参数标示模板与数据的绑定状态. 初始化没有传入 data 时, 该值为 false, 传入了 data 或者手动调用 <code>render</code> 方法后其值为 true.</p>

  </section>
  <footer>
    
  </footer>
  </div>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-12642431-6', 'antjs.org');
    ga('send', 'pageview');

  </script>
  <script>
  if(/firefox/i.test(navigator.userAgent)){
    var links = document.getElementById('nav').getElementsByTagName('a');
    for(var i = 0, l = links.length; i < l; i++){
      if(links[i].href.indexOf('#') >= 0){
        links[i].href = '#' + encodeURIComponent(links[i].getAttribute('href').slice(1));
      }
    }
  }
  </script>
  <script src="dist/ant.min.js"></script>
</body>
</html>