/*! ant.js - v0.3.0-dev 2014-09-16 */

!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Ant=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(a){a&&(this.prefix=a)}function d(a,b){C(a)&&(b=a,a=b.tpl),b=b||{};var c,d=this.defaults||{};b=G(!0,{},d,b);var e=b.data||{},g=b.events||{},h=b.filters||{},i=b.watchers||{},j=b.partials||{};c=H(a,b.el),a=c.tpl,c=c.el,this.options=b,this.tpl=a,this.el=c,this.data={},this.filters=h,this.partials=j,this._partialInfo={};for(var k in g)this.on(k,g[k]);f.call(this);for(var l in i)this.watch(l,i[l].bind(this));e=G(this.data,e),b.data&&this.render(e)}function e(a,b,c,d){var e,f=this._vm;return y(a)?(d=c,c=b,e=b=a):"string"==typeof a?(a=D(a).join("."),z(b)&&(b=this.get(a)),e=E(a,b,{}),f=f.$getVM(a)):b=this.data,z(c)&&(c=y(a)),f.$update(b,c,d!==!1),this}function f(){var a=new o({$ant:this});this._vm=a,a.$build(this.el)}function g(a,b,c){if(c=I(c||{}),c.assignment=I(c.assignment||{}),a.nodeType===K.FRAGMENT&&(a=a.childNodes),"length"in a&&z(a.nodeType))for(var d=0;d<a.length;d++)g(a[d],b,c);else if(a.nodeType!==K.COMMENT){if(a.nodeType===K.TEXT)return void i(a,b,c);if(!h(a,b,c)){if(a.content&&a.content.nodeType)return g(a.content,b,c),void(a.parentNode&&a.parentNode.replaceChild(a.content,a));for(var e,f=a.firstChild;f;)e=f.nextSibling,g(f,b,c),f=e}}}function h(a,b,c){for(var e,f,g,h=d.prefix,i=d.directive.getDir(a,d.directives,h),k=0,l=i.length;l>k&&(e=i[k],e.context=c,e.assignment=c.assignment,!(f>e.priority));k++)a.removeAttribute(e.nodeName),j(b,e),e.terminal&&(g=!0,f=e.priority);return g?!0:void 0}function i(a,b,c){if(x.hasToken(a.nodeValue)){var e,f,g=x.parseToken(a.nodeValue),h=g.textMap,k=a.parentNode;h.length>1?(h.forEach(function(d){var e=p.createTextNode(d);k.insertBefore(e,a),i(e,b,c)}),k.removeChild(a)):(e=g[0],L.test(e.path)?(e.path=e.path.replace(L,""),f=I(d.directives.partial)):f=I(e.escape?d.directives.text:d.directives.html),j(b,G(f,e,{el:a,context:c,assignment:c.assignment})))}}function j(a,b){if(b.replace){var c=b.el;A(b.replace)?b.node=b.replace():b.replace&&(b.node=p.createTextNode("")),b.el=b.el.parentNode,b.el.replaceChild(b.node,c)}b.link(a),b.dirs?b.dirs.forEach(function(c){k(a,G(I(b),c))}):k(a,b)}function k(a,b){return b.path?new m(a,b):void 0}function l(a){var b,c={};try{c=q(a,this.token.type)}catch(d){d.message='SyntaxError in "'+a+'" | '+d.message,console.error(d)}b=r.summary(c),G(this.token,b),G(this,b),this.ast=c}function m(a,b){var c=b.assignment;this.token=b,this.relativeVm=a,this.ant=a.$root.$ant,this.val=0/0,this.state=m.STATE_READY,l.call(this,b.path),a.$$sPaths=a.$$sPaths||[];for(var d=0,e=this.paths.length;e>d;d++)a.$getVM(this.paths[d],{assignment:c,sPaths:a.$$sPaths}).$watchers.push(this);this.locals.length||this.fn()}function n(a){try{this.token.update(a,this.val),this.val=a}catch(b){console.error(b)}}function o(a){G(this,{$key:"",$root:this,$watchers:[]},a)}var p=a("./document.js"),q=a("./parse.js").parse,r=a("./eval.js"),s=a("./utils.js"),t=a("./event.js"),u=a("./class.js"),v=a("./directive.js"),w=a("./directives"),x=a("./token.js"),y=s.isObject,z=s.isUndefined,A=s.isFunction,B=s.isArray,C=s.isPlainObject,D=s.parseKeyPath,E=s.deepSet,F=s.deepGet,G=s.extend,H=s.tplParse,I=s.create;G(d,u,v,{setPrefix:c,doc:p,directives:{},utils:s}),d.setPrefix("a-");for(var J in w)d.directive(J,w[J]);G(d.prototype,t,{render:function(a){return a=a||this.data,this.set(a,{isExtend:!1}),this.trigger("render"),this},clone:function(a){var b=G(!0,{},this.options);return a&&a.data&&(b.data=null),new this.constructor(this.tpl,G(!0,b,a))},get:function(a){return F(a,this.data)},set:function(a,b,c){var d,f,g,h,i;if(z(a))return this;if(y(a))d=!0,c=b,c=c||{},c.isExtend!==!1?(f=!0,G(!0,this.data,a)):(f=!1,this.data=G(!0,{},a));else if(c=c||{},F(a,this.data)!==b&&(d=!0),d)if(c.isExtend!==!0){if(h=D(a),h.length>1){if(i=h.pop(),g=F(h.join("."),this.data),z(g))E(h.join("."),g={},this.data);else if(!y(g)){var j=g;E(h.join("."),g={toString:function(){return j}},this.data)}}else a?(g=this.data,i=a):(g=this,i="data");g[i]=y(b)?G(!0,B(b)?[]:{},b):b,f=!1}else G(!0,this.data,E(a,b,{})),f=!0;return d&&!c.silence&&(y(a)?e.call(this,a,f,c.isBubble):e.call(this,a,b,f,c.isBubble)),this},setPartial:function(a){if(a){a=G({},this._partialInfo[a.name],a);var b,c,e,f=a.name,g=a.target,h=a.content||this.partials[f],i=a.path||"";if(f&&(this._partialInfo[f]=a),h){if(e=this._vm.$getVM(i),"string"==typeof h)if(a.escape)b=[p.createTextNode(h)];else{c=H(h,"div").el.childNodes,b=[];for(var j=0,k=c.length;k>j;j++)b.push(c[j])}else b=[h instanceof d?h.el:h];if(g)for(var j=0,k=b.length;k>j;j++)A(g)?g.call(this,b[j]):g.appendChild(b[j]);e.$build(b,a.context)}return this}},watch:function(a,b){return b&&k(this._vm,{path:a,update:b}),this},unwatch:function(a,b){var c=this._vm.$getVM(a,{strict:!0});if(c)for(var d=c.$watchers.length-1;d>=0;d--)c.$watchers[d].token.update===b&&c.$watchers.splice(d,1);return this}});var K={ATTR:2,TEXT:3,COMMENT:8,FRAGMENT:11},L=/^>\s*(?=.+)/;G(m,{STATE_READY:0,STATE_CALLED:1},u),G(m.prototype,{fn:function(){for(var a,b,c=this,d=this.token,e={},f=0,g=this.locals.length;g>f;f++)a=this.locals[f],e[a]=this.relativeVm.$getVM(a,{assignment:d.assignment}).$getData(),d.assignment&&d.assignment[a]&&this.paths.indexOf(a+".$index")>=0&&(e[a]=G({$index:1*d.assignment[a].$key},e[a]));b=this.getValue(e),b&&b.then?b.then(function(a){n.call(c,a)}):n.call(this,b),this.state=m.STATE_CALLED},getValue:function(a){var b,c=this.token,d=G({},this.ant.filters,function(a,b){return b.bind(c)});try{b=r.eval(this.ast,{locals:a,filters:d})}catch(e){b="",console.error(e)}return(z(b)||null===b)&&(b=""),b}}),o.prototype={$root:null,$parent:null,$$sPaths:null,$ant:null,$key:null,$watchers:null,$value:0/0,$getVM:function(a,b){a+="",b=b||{};var c,d,e,f=b.scope||this.$root,g=b.assignment||{},h=s.parseKeyPath(a),i=b.sPaths||[];for(var c in g){e=!0;break}if(h[0]in g?(f=g[h[0]],h.shift(),f!==this&&(d=!0)):d=e,a)for(var j=0,k=h.length;k>j;j++){if(c=h[j],!f[c]){if(b.strict)return null;f[c]=new o({$parent:f,$root:f.$root,$key:c})}f=f[c]}return d&&i.push(f.$getKeyPath()),f},$getKeyPath:function(){for(var a=this.$key,b=this;(b=b.$parent)&&b.$key;)a=b.$key+"."+a;return a},$getData:function(a){var b=F(a,this.$root.$ant.get(this.$getKeyPath()));return b},$update:function(a,b,c){for(var d=b?a:this,e=this,f=0,g=this.$watchers.length;g>f;f++)(this.$value!==a||this.$watchers[f].state===m.STATE_READY)&&this.$watchers[f].fn();if(this.$value=a,y(d))for(var h in d)!this.hasOwnProperty(h)||h in o.prototype||this[h].$update(a?a[h]:void 0,b);if(c)for(;e=e.$parent;)for(var f=0,g=e.$watchers.length;g>f;f++)e.$watchers[f].fn()},$build:function(a,b){g(a,this,b||{});var c=this.$root.$ant;if(this.$update(c.get(this.$getKeyPath()),!0),this.$$sPaths){for(var d=0,e=this.$$sPaths.length;e>d;d++)this.$getVM(this.$$sPaths[d]).$update(c.get(this.$$sPaths[d]),!0);this.$$sPaths=null}}},d.version="0.3.0-dev",b.exports=d},{"./class.js":2,"./directive.js":3,"./directives":5,"./document.js":9,"./eval.js":10,"./event.js":11,"./parse.js":12,"./token.js":13,"./utils.js":14}],2:[function(a,b){var c=a("./utils.js").extend,d={extend:function(a,b){a=a||{};var d=a.hasOwnProperty("constructor")?a.constructor:function(){return e.apply(this,arguments)},e=this,f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,c(d.prototype,a),c(d,e,b,{__super__:e.prototype}),d}};b.exports=d},{"./utils.js":14}],3:[function(a,b,c){"use strict";function d(a,b){var c=this.directives=this.directives||{};return c[a]=new e(a,b)}function e(a,b){this.type=a,g.extend(this,b)}function f(a,b,c){c=c||"",b=b||{};for(var d,e,f,j,k=[],l={},m=a.parentNode,n=a.attributes.length-1;n>=0;n--)d=a.attributes[n],e=d.nodeName,f=e.slice(c.length),0===e.indexOf(c)&&f in b?(j=g.create(b[f]),j.dirName=f):h.hasToken(d.value)?(j=g.create(b.attr),j.dirs=h.parseToken(d.value),j.dirName=0===e.indexOf(c)?f:e):j=!1,j&&(j.anchor&&!l.start&&(l.start=i.createTextNode(""),m.insertBefore(l.start,a),l.end=i.createTextNode(""),a.nextSibling?m.insertBefore(l.end,a.nextSibling):m.appendChild(l.end)),k.push(g.extend(j,{el:a,node:d,nodeName:e,path:d.value,anchors:j.anchor?l:null})));return k.sort(function(a,b){return b.priority-a.priority}),k}var g=a("./utils.js"),h=a("./token.js"),i=a("./document.js");e.prototype={priority:0,link:g.noop,update:g.noop,tearDown:g.noop,terminal:!1,replace:!1,anchor:!1,anchors:null,getNodes:function(){var a=[],b=this.anchors.start.nextSibling;if(this.anchor&&b){for(;b!==this.anchors.end;)a.push(b),b=b.nextSibling;return a}return null}},d.getDir=f,c.directive=d},{"./document.js":9,"./token.js":13,"./utils.js":14}],4:[function(a,b){"use strict";function c(a,b,c){try{(b in a||"class"===b)&&("style"===b&&a.style.setAttribute?a.style.setAttribute("cssText",c):"class"===b?a.className=c:a[b]="boolean"==typeof a[b]?!0:c)}catch(d){}try{a.setAttribute(b,c)}catch(d){console.warn(d)}}function d(a,b){a.removeAttribute(b),delete a[b]}var e=/\?$/;b.exports={link:function(){this.dirName===this.type?this.attrs={}:e.test(this.dirName)&&(this.dirName=this.dirName.replace(e,""),this.conditionalAttr=!0)},update:function(a){var b=this.el;if(this.dirName===this.type){for(var e in a)c(b,e,a[e]),delete this.attrs[e];for(var e in this.attrs)d(b,e);this.attrs=a}else this.conditionalAttr?a?c(b,this.dirName,a):d(b,this.dirName):(this.textMap[this.position]=a&&a+"",c(b,this.dirName,this.textMap.join("")))}}},{}],5:[function(a,b){"use strict";var c=a("../document.js"),d=a("../utils.js"),e={};e.text={terminal:!0,replace:!0,update:function(a){this.node.nodeValue=d.isUndefined(a)?"":a}},e.html={terminal:!0,replace:!0,link:function(){this.nodes=[]},update:function(a){var b=c.createElement("div");b.innerHTML=d.isUndefined(a)?"":a;for(var e;e=this.nodes.pop();)e.parentNode&&e.parentNode.removeChild(e);for(var f=b.childNodes;e=f[0];)this.nodes.push(e),this.el.insertBefore(e,this.node)}},e["if"]={anchor:!0,link:function(){this.el.content?(this.frag=this.el.content,this.el.parentNode.removeChild(this.el)):(this.frag=c.createDocumentFragment(),this.hide())},update:function(a){a?this.state||this.show():this.state&&this.hide(),this.state=a},show:function(){var a=this.anchors.end;a.parentNode&&a.parentNode.insertBefore(this.frag,a)},hide:function(){var a=this.getNodes();if(a)for(var b=0,c=a.length;c>b;b++)this.frag.appendChild(a[b])}},e.template={priority:1e4,link:function(){for(var a=this.el.childNodes,b=c.createDocumentFragment();a[0];)b.appendChild(a[0]);this.el.content=b}},e.partial=a("./partial.js"),e.repeat=a("./repeat.js"),e.attr=a("./attr.js"),e.model=a("./model.js"),b.exports=e},{"../document.js":9,"../utils.js":14,"./attr.js":4,"./model.js":6,"./partial.js":7,"./repeat.js":8}],6:[function(a,b){"use strict";function c(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function d(a,b,c){a.removeEventListener?a.removeEventListener(b,c):a.detachEvent("on"+b,c)}var e=a("../utils.js"),f=a("../token.js").hasToken;b.exports={teminal:!0,priority:1,link:function(a){var b=this.path;if(!b)return!1;var g,h=this.el,i="change",j=g="value",k=a.$root.$ant,l=a.$getVM(b,{assignment:this.assignment}),m=e.isUndefined(k.get(l.$getKeyPath())),n=/\r\n/g,o=function(c){var d=(c||a.$getData(b)||"")+"",c=h[g];c&&c.replace&&(c=c.replace(n,"\n")),d!==c&&(h[g]=d)},p=function(a){var b=h[j];b.replace&&(b=b.replace(n,"\n")),k.set(l.$getKeyPath(),b,{isBubble:a!==!0})},q=function(a){a&&a.propertyName&&a.propertyName!==g||p.apply(this,arguments)},r=e.ie;switch(h.tagName){default:j=g="innerHTML";case"INPUT":case"TEXTAREA":switch(h.type){case"checkbox":j=g="checked",r&&(i+=" click");break;case"radio":g="checked",r&&(i+=" click"),o=function(){h.checked=h.value===a.$getData(b)+""},m=h.checked;break;default:k.options.lazy||("oninput"in h&&(i+=" input"),r&&(i+=" keyup propertychange cut"))}break;case"SELECT":h.multiple&&(p=function(a){for(var b=[],c=0,d=h.options.length;d>c;c++)h.options[c].selected&&b.push(h.options[c].value);k.set(l.$getKeyPath(),b,{isBubble:a!==!0})},o=function(){var c=a.$getData(b);if(c&&c.length)for(var d=0,e=h.options.length;e>d;d++)h.options[d].selected=-1!==c.indexOf(h.options[d].value)}),m=m&&!f(h[j])}this.update=o,i.split(/\s+/g).forEach(function(a){d(h,a,q),c(h,a,q)}),h[j]&&m&&p(!0)}}},{"../token.js":13,"../utils.js":14}],7:[function(a,b){"use strict";a("../document.js"),a("../utils.js");b.exports={terminal:!0,replace:!0,link:function(a){var b,c=this;b=a.$root.$ant,this.pName=this.path,this.vm=a,this.path="",b.setPartial({name:this.pName,target:function(a){c.el.insertBefore(a,c.node)},escape:this.escape,context:this})}}},{"../document.js":9,"../utils.js":14}],8:[function(a,b){"use strict";function c(a,b,c){for(var d=a.__vm__.$watchers,e=!0,f=0,g=d.length;g>f;f++)"repeat"===d[f].token.type&&(d[f].token[b](c,a,e),e=!1);a.__vm__.length&&a.__vm__.length.$update(a.length,!1,!0)}var d=a("../document.js"),e=a("../utils.js"),f=e.afterFn;b.exports={priority:1e3,anchor:!0,terminal:!0,link:function(a){this._anchors=[],this.relativeVm=a,this.el.parentNode.removeChild(this.el)},update:function(a,b){this.vm||(this.vm=this.relativeVm.$getVM(this.paths[0],{assignment:this.assignment}));var c,d=this.vm.$watchers;if(a&&a!==b)if(e.isArray(a)){a.splice!==g.splice&&(e.extend(a,g),a.__vm__=this.vm);for(var f=0,h=d.length;h>f;f++)if("repeat"===d[f].token.type){c=d[f].token===this;break}this.splice([0,this._anchors.length].concat(a),a,c)}else console.warn("需要一个数组")},getRepeatNodes:function(a,b){var c=this._anchors[a],d=this._anchors[a+1],f=[];b=b||e.noop;for(var g,h=c;h&&h!==d&&h!==this.anchors.end;h=g)g=h.nextSibling,f.push(h),b.call(h);return f},splice:function(a,b,c){var f,g=this._anchors,h=[],i=a.slice(2),j=1*a[0],k=1*a[1],l=i.length,m=this.anchors.start.parentNode;e.isUndefined(k)&&(a[1]=k=g.length-j);for(var n=j,o=g.length;o>n;n++)if(j+k>n){try{this.getRepeatNodes(n,function(){m.removeChild(this)})}catch(p){}c&&delete this.vm[n]}else{if(!k&&!l)break;var q=n-(k-l),r=n;q>r&&(q=o-(n-j),r=q+(k-l)),this.getRepeatNodes(r,function(){this.$index=q}),c&&(f=this.vm[q]=this.vm[r],f.$key=q+""),f.$index&&f.$index.$update(f.$key)}for(var s,t,u,v=d.createDocumentFragment(),w=0;l>w;w++){t=this.el.cloneNode(!0),u=d.createTextNode(""),this.el.content&&!t.content&&(t.content=this.el.content.cloneNode(!0)),c&&delete this.vm[j+w],f=this.vm.$getVM(j+w,{scope:this.vm,assignment:this.assignment}),s=e.create(this.assignment);for(var x=0;x<this.assignments.length;x++)s[this.assignments[x]]=f;v.appendChild(u),v.appendChild(t),f.$build(t,{assignment:s}),f.$index&&f.$index.$update(f.$key),h.push(u);for(var y=u;y;y=y.nextSibling)1==y.nodeType&&(y.$index=j+w)}if(h.length&&m.insertBefore(v,g[j+k]||this.anchors.end),c)for(var z=o-k+l;o>z;z++)delete this.vm[z];b.__vm__!==this.vm&&(b.__vm__=this.vm),a=a.slice(0,2).concat(h),g.splice.apply(g,a)},reverse:function(a,b,c){for(var e,f=this.vm,g=this.anchors.end,h=d.createDocumentFragment(),i=0,j=this._anchors.length;j>i;i++)c&&.5>i&&(e=f[i],f[i]=f[j-i-1],f[i].$key=i+"",e.$key=j-i-1+"",f[j-i-1]=e),c&&e.$index&&e.$index.$update(e.$key),this.getRepeatNodes(j-i-1,function(){this.$index=i,h.appendChild(this)});g.parentNode.insertBefore(h,g),this._anchors.reverse()},sort:function(){this.update(this.vm.$value)}};var g={splice:f([].splice,function(){c(this,"splice",[].slice.call(arguments))}),push:f([].push,function(){var a=[].slice.call(arguments);a.unshift(this.length-a.length,0),c(this,"splice",a)}),pop:f([].pop,function(){c(this,"splice",[this.length,1])}),shift:f([].shift,function(){c(this,"splice",[0,1])}),unshift:f([].unshift,function(){var a=[].slice.call(arguments);a.unshift(0,0),c(this,"splice",a)}),sort:f([].sort,function(){c(this,"sort")}),reverse:f([].reverse,function(){c(this,"reverse")})}},{"../document.js":9,"../utils.js":14}],9:[function(a,b){!function(c){"use strict";b.exports=c.document||a("jsdom").jsdom()}(function(){return this}())},{}],10:[function(a,b,c){"use strict";function d(a,b){return i[a][b]||function(){}}function e(a){f=a?{locals:a.locals||{},filters:a.filters||{}}:{filters:{},locals:{}},g={filters:{},locals:{},paths:{},assignments:{}},h=""}var f,g,h,i={unary:{"+":function(a){return+a},"-":function(a){return-a},"!":function(a){return!a},"[":function(a){return a},"{":function(a){for(var b={},c=0,d=a.length;d>c;c++)b[a[c][0]]=a[c][1];return b},"typeof":function(a){return typeof a},"new":function(a){return new a}},binary:{"+":function(a,b){return a+b},"-":function(a,b){return a-b},"*":function(a,b){return a*b},"/":function(a,b){return a/b},"%":function(a,b){return a%b},"<":function(a,b){return b>a},">":function(a,b){return a>b},"<=":function(a,b){return b>=a},">=":function(a,b){return a>=b},"==":function(a,b){return a==b},"!=":function(a,b){return a!=b},"===":function(a,b){return a===b},"!==":function(a,b){return a!==b},"&&":function(a,b){return a&&b},"||":function(a,b){return a||b},".":function(a,b){return b&&(h=h+"."+b),a[b]},"[":function(a,b){return"undefined"!=typeof b&&(h=h+"."+b),a[b]},"(":function(a,b){return a.apply(null,b)},"|":function(a,b){return b.call(null,a)},"in":function(a,b){return this.assignment?b:a in b}},ternary:{"?":function(a,b,c){return a?b:c},"(":function(a,b,c){return a[b].apply(a,c)},"|":function(a,b,c){return b.apply(null,[a].concat(c))}}},j=["first","second","third"],k=function(a){for(var b,c,e=a.arity,i=a.value,l=[],m=0;3>m;m++)if(b=a[j[m]])if(Array.isArray(b)){l[m]=[];for(var n=0,o=b.length;o>n;n++)l[m].push("undefined"==typeof b[n].key?k(b[n]):[b[n].key,k(b[n])])}else l[m]=k(b);switch("literal"!==e&&(h&&"."!==i&&"["!==i&&(g.paths[h]=!0),"name"===e&&(h=i)),e){case"unary":case"binary":case"ternary":try{c=d(e,i).apply(a,l)}catch(p){}break;case"literal":c=i;break;case"assignment":g.assignments[i]=!0;break;case"name":g.locals[i]=!0,c=f.locals[i];break;case"filter":g.filters[i]=!0,c=f.filters[i];break;case"this":c=f.locals}return c};c.eval=function(a,b){return e(b||{}),k(a)},c.summary=function(a){e(),k(a),h&&(g.paths[h]=!0);for(var b in g)g[b]=Object.keys(g[b]);return g}},{}],11:[function(a,b){var c=a("./utils.js"),d={on:function(a,b,c){var d=c||this;return d._handlers=d._handlers||{},d._handlers[a]=d._handlers[a]||[],d._handlers[a].push({handler:b,context:c,ctx:d}),this},off:function(a,b,d){var e=d||this,f=e._handlers;if(a&&f[a])if(c.isFunction(b))for(var g=f[a].length-1;g>=0;g--)f[a][g].handler===b&&f[a].splice(g,1);else f[a]=[];return this},trigger:function(a){var b=this,c=[].slice.call(arguments,1),d=b._handlers;return d&&d[a]&&d[a].forEach(function(a){a.handler.apply(b,c)}),this}};b.exports=d},{"./utils.js":14}],12:[function(a,b,c){"use strict";var d,e=Object.create||function(a){function b(){}return b.prototype=a,new b},f=function(a,b){b=b||this;var c=a+=" But found '"+b.value+"'"+(b.from?" at "+b.from:"")+" in '"+d+"'",e=new Error(c);throw e.name=b.name="SyntaxError",b.message=a,e},g=function(a,b,c){var d,e,g,h,i,j=0,k=a.length,l=[],m=function(a,b){return{type:a,value:b,from:e,to:j}};if(a){for("string"!=typeof b&&(b="<>+-&"),"string"!=typeof c&&(c="=>&:"),d=a.charAt(j);d;)if(e=j," ">=d)j+=1,d=a.charAt(j);else if(d>="a"&&"z">=d||d>="A"&&"Z">=d||"$"===d||"_"===d){for(i=d,j+=1;d=a.charAt(j),d>="a"&&"z">=d||d>="A"&&"Z">=d||d>="0"&&"9">=d||"_"===d;)i+=d,j+=1;l.push(m("name",i))}else if(d>="0"&&"9">=d){for(i=d,j+=1;d=a.charAt(j),!("0">d||d>"9");)j+=1,i+=d;if("."===d)for(j+=1,i+=d;d=a.charAt(j),!("0">d||d>"9");)j+=1,i+=d;if("e"===d||"E"===d){j+=1,i+=d,d=a.charAt(j),("-"===d||"+"===d)&&(j+=1,i+=d,d=a.charAt(j)),("0">d||d>"9")&&f("Bad exponent",m("number",i));do j+=1,i+=d,d=a.charAt(j);while(d>="0"&&"9">=d)}d>="a"&&"z">=d&&(i+=d,j+=1,f("Bad number",m("number",i))),g=+i,isFinite(g)?l.push(m("number",g)):f("Bad number",m("number",i))}else if("'"===d||'"'===d){for(i="",h=d,j+=1;d=a.charAt(j)," ">d&&(m("string",i),f("\n"===d||"\r"===d||""===d?"Unterminated string.":"Control character in string.",m("",i))),d!==h;){if("\\"===d)switch(j+=1,j>=k&&f("Unterminated string",m("string",i)),d=a.charAt(j)){case"b":d="\b";break;case"f":d="\f";break;case"n":d="\n";break;case"r":d="\r";break;case"t":d="	";break;case"u":j>=k&&f("Unterminated string",m("string",i)),d=parseInt(a.substr(j+1,4),16),(!isFinite(d)||0>d)&&f("Unterminated string",m("string",i)),d=String.fromCharCode(d),j+=4}i+=d,j+=1}j+=1,l.push(m("string",i)),d=a.charAt(j)}else if("/"===d&&"/"===a.charAt(j+1))for(j+=1;d=a.charAt(j),"\n"!==d&&"\r"!==d&&""!==d;)j+=1;else if(b.indexOf(d)>=0){for(i=d,j+=1;;){if(d=a.charAt(j),j>=k||c.indexOf(d)<0)break;i+=d,j+=1}l.push(m("operator",i))}else j+=1,l.push(m("operator",d)),d=a.charAt(j);return l}},h=function(){var a,b,c,h,i={},j=function(){return this},k=function(a){return a.nud=j,a.led=null,a.std=null,a.lbp=0,a},l=function(d){var g,h,j,l;return d&&a.id!==d&&f("Expected '"+d+"'.",a),c>=b.length?void(a=i["(end)"]):(j=b[c],c+=1,l=j.value,g=j.type,("operator"===g||"string"!==g)&&l in i?(h=i[l],h||f("Unknown operator.",j)):"name"===g?h=k(j):"string"===g||"number"===g?(h=i["(literal)"],g="literal"):f("Unexpected token.",j),a=e(h),a.from=j.from,a.to=j.to,a.value=l,a.arity=g,a)},m=function(b){var c,d=a;for(l(),c=d.nud();b<a.lbp;)d=a,l(),c=d.led(c);return c},n={nud:function(){f("Undefined.",this)},led:function(){f("Missing operator.",this)}},o=function(a,b){var c=i[a];return b=b||0,c?b>=c.lbp&&(c.lbp=b):(c=e(n),c.id=c.value=a,c.lbp=b,i[a]=c),c},p=function(a,b){var c=o(a);return c.nud=function(){return this.value=i[this.id].value,this.arity="literal",this},c.value=b,c},q=function(a,b,c){var d=o(a,b);return d.led=c||function(a){return this.first=a,this.second=m(b),this.arity="binary",this},d},r=function(a,b,c){var d=o(a,b);return d.led=c||function(a){return this.first=a,this.second=m(b-1),this.arity="binary",this},d},s=function(a,b){var c=o(a);return c.nud=b||function(){return this.first=m(70),this.arity="unary",this},c};return o("(end)"),o("(name)"),o(":"),o(")"),o("]"),o("}"),o(","),p("true",!0),p("false",!1),p("null",null),p("undefined"),p("Math",Math),p("Date",Date),o("(literal)").nud=j,q("?",20,function(a){return this.first=a,this.second=m(0),l(":"),this.third=m(0),this.arity="ternary",this}),r("&&",31),r("||",30),r("===",40),r("!==",40),r("==",40),r("!=",40),r("<",40),r("<=",40),r(">",40),r(">=",40),q("in",45,function(a){return this.first=a,this.second=m(0),this.arity="binary","repeat"===h&&(a.arity="assignment",this.assignment=!0),this}),q("+",50),q("-",50),q("*",60),q("/",60),q("%",60),q(".",80,function(b){return this.first=b,"name"!==a.arity&&f("Expected a property name.",a),a.arity="literal",this.second=a,this.arity="binary",l(),this}),q("[",80,function(a){return this.first=a,this.second=m(0),this.arity="binary",l("]"),this}),q("(",80,function(b){var c=[];if("."===b.id||"["===b.id?(this.arity="ternary",this.first=b.first,this.second=b.second,this.third=c):(this.arity="binary",this.first=b,this.second=c,"unary"===b.arity&&"function"===b.id||"name"===b.arity||"literal"===b.arity||"("===b.id||"&&"===b.id||"||"===b.id||"?"===b.id||f("Expected a variable name.",b)),")"!==a.id)for(;;){if(c.push(m(0)),","!==a.id)break;l(",")}return l(")"),this}),q("|",10,function(b){var c;if(this.first=b,a.arity="filter",this.second=m(10),this.arity="binary",":"===a.id)for(this.arity="ternary",this.third=c=[];;)if(l(":"),c.push(m(0)),":"!==a.id)break;return this}),s("!"),s("-"),s("typeof"),s("(",function(){var a=m(0);return l(")"),a}),s("[",function(){var b=[];if("]"!==a.id)for(;;){if(b.push(m(0)),","!==a.id)break;l(",")}return l("]"),this.first=b,this.arity="unary",this}),s("{",function(){var b,c,d=[];if("}"!==a.id)for(;;){if(b=a,"name"!==b.arity&&"literal"!==b.arity&&f("Bad property name: ",a),l(),l(":"),c=m(0),c.key=b.value,d.push(c),","!==a.id)break;l(",")}return l("}"),this.first=d,this.arity="unary",this}),function(a,e){d=a,b=g(a,"=<>!+-*&|/%^","=<>&|"),c=0,h=e,l();var f=m(0);return l("(end)"),f}};c.parse=h()},{}],13:[function(a,b,c){function d(a){return f.lastIndex=0,a&&f.test(a)}function e(a){var b,c,d=[],e=[],g=0;for(f.lastIndex=0;b=f.exec(a);)f.lastIndex-g>b[0].length&&e.push(a.slice(g,f.lastIndex-b[0].length)),c={escape:!b[2],path:(b[2]||b[1]).trim(),position:e.length,textMap:e},d.push(c),e.push(b[0]),g=f.lastIndex;return a.length>g&&e.push(a.slice(g,a.length)),d.textMap=e,d}var f=/{{({([^}\n]+)}|[^}\n]+)}}/g;c.hasToken=d,c.parseToken=e},{}],14:[function(a,b){"use strict";function c(a){return a.replace(h,"").split(g)}function d(){var a,b,c,e,f,g,h,i=arguments[0]||{},k=1,l=arguments.length,m=!1;for("boolean"==typeof i&&(m=i,i=arguments[k]||{},k++),j.isFunction(arguments[l-1])&&(h=arguments[l-1],l--),"object"==typeof i||j.isFunction(i)||(i={});l>k;k++)if(null!=(a=arguments[k]))for(b in a)if(a.hasOwnProperty(b)&&"prototype"!==b)if(c=i[b],e=a[b],m&&e&&(j.isPlainObject(e)||(f=j.isArray(e)))){if(i===e)continue;f?(f=!1,g=c&&j.isArray(c)?c:[]):g=c&&j.isPlainObject(c)?c:{},h&&(e=h(g,e,b)),i[b]=d(m,g,e,h)}else j.isUndefined(e)||(h&&(e=h(c,e,b)),i[b]=e);return i}function e(a,b){var c;return j.isObject(a)?(b?(c=b=j.isObject(b)?b:f.createElement(b),c.innerHTML="",b.appendChild(a)):c=a,a=c.outerHTML):(c=j.isObject(b)?b:f.createElement(b||"div"),c.innerHTML=a),{el:c,tpl:a}}var f=a("./document.js"),g=/(?:\.|\[)/g,h=/\]/g,i=Object.create||function(a){function b(){}return b.prototype=a,new b},j={noop:function(){},ie:!!f.attachEvent,isObject:function(a){return"object"==typeof a&&null!==a},isUndefined:function(a){return"undefined"==typeof a},isFunction:function(a){return"function"==typeof a},isArray:function(a){return j.ie?a&&a.constructor+""==Array+"":Array.isArray(a)},isPlainObject:function(a){return!a||"[object Object]"!=={}.toString.call(a)||a.nodeType||a===a.window?!1:!0},beforeFn:function(a,b,c){return function(){var d=b.apply(this,arguments);return c&&c.call(this,d)?d:a.apply(this,arguments)}},afterFn:function(a,b,c){return function(){var d=a.apply(this,arguments);return c&&c.call(this,d)?d:(b.apply(this,arguments),d)}},parseKeyPath:c,deepSet:function(a,b,e){if(a){var f=c(a),g=e;f.forEach(function(a,c){c===f.length-1?g[a]=b:g&&g.hasOwnProperty(a)?g=g[a]:(g[a]={},g=g[a])})}else d(e,b);return e},deepGet:function(a,b){var d,e,f=b;if(a){d=c(a);for(var g=0,h=d.length;h>g;g++){if(e=d[g],!f||!f.hasOwnProperty(e))return;f=f[e]}}return f},extend:d,create:i,tplParse:e};b.exports=j},{"./document.js":9}]},{},[1])(1)});
//# sourceMappingURL=ant.min.map