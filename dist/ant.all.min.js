/*! ant.js 2013-08-28 10:25 all */
Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;d>c;++c)c in this&&a.call(b,this[c],c,this)}),Array.isArray||(Array.isArray=function(a){return"[object Array]"==={}.toString.call(a)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null==this)throw new TypeError;var b,c,d=Object(this),e=d.length>>>0;if(0===e)return-1;if(b=0,arguments.length>1&&(b=Number(arguments[1]),b!=b?b=0:0!=b&&1/0!=b&&b!=-1/0&&(b=(b>0||-1)*Math.floor(Math.abs(b)))),b>=e)return-1;for(c=b>=0?b:Math.max(e-Math.abs(b),0);e>c;c++)if(c in d&&d[c]===a)return c;return-1}),function(a){var b=this;if("object"==typeof module&&module){var c=b.document||require("jsdom").jsdom();module.exports=a(c)}else a=a(b.document),"function"==typeof define&&define(function(){return a}),b.Ant=a}(function(a){"use strict";function b(a){var c,d,e,f,g=arguments.length;a=a||{};for(var h=1;g>h;h++)if(null!==(c=arguments[h]))for(var i in c)d=a[i],e=c[i],a!==e&&(w(e)||Array.isArray(e)?(f=Array.isArray(e)?d&&Array.isArray(d)?d:[]:d||{},a[i]=b(f,e)):a[i]=e);return a}function c(a){a&&(F=a,G=F+"if",H=F+"repeat",I=F+"model")}function d(a,c){c=c||{};var d,f=c.data||{},h=c.events||{};d=e(a,c.el),a=d.tpl,d=d.el,this.tpl=a,this.el=d,this.data={},this.isRendered=!1,this.isLazy=!!c.lazy,this.options=c,this.partials=null;for(var i in h)this.on(i,h[i]);g(this),f=b(this.data,f),c.data&&this.render(f),this.init.apply(this,arguments)}function e(b,c){var d;return u(b)?(c?(d=c=u(c)?c:a.createElement(c),d.innerHTML="",c.appendChild(b)):d=b,b=d.outerHTML):(d=u(c)?c:a.createElement(c||"div"),d.innerHTML=b),{el:d,tpl:b}}function f(a,b,c){a.$$render(b,c)}function g(a){var b=new k;b.$$root=b,b.$$ant=a,a.vm=b,h(a.el,b)}function h(a,b){if(a.nodeType&&!a.length)i(a,b);else for(var c=0,d=a.length;d>c;c++)i(a[c],b)}function i(a,b){if(8!==a.nodeType){if(3===a.nodeType)return b.$$updateVM(a,a.parentNode),void 0;var c,d,e=a.getAttribute(H),f=a.getAttribute(G),g=a.getAttribute(I);if(e?(b.$$getChild(e).$$addGenerator(a,b,s.TYPE_REPEAT),c=!0):f?(f=f.replace(O,""),b.$$getChild(f).$$addGenerator(a,b,s.TYPE_IF),c=!0):g&&j(a,g,b),!c){for(var f=0,h=a.attributes.length;h>f;f++)b.$$updateVM(a.attributes[f],a);for(var k=a.firstChild;k;)d=k.nextSibling,i(k,b),k=d}}}function j(a,b,c){b=b.trim();var d,e=c.$$root.$$ant,f=c.$$getChild(b),g="change",h=d="value",i=v(e.get(f.$$getKeyPath())),j=/\r\n/g,k=function(){var e=this.$$data||c.$$getData(b)||"",f=a[d];f&&f.replace&&(f=f.replace(j,"\n")),e!==f&&(a[d]=e)},l=function(){var b=a[h];b.replace&&(b=b.replace(j,"\n")),e.set(f.$$getKeyPath(),b)};switch(a.tagName){case"INPUT":case"TEXTAREA":switch(a.type){case"checkbox":h=d="checked",L&&(g+=" click");break;case"radio":d="checked",L&&(g+=" click"),k=function(){a.checked=a.value===c.$$getData(b)},i=a.checked;break;default:e.isLazy||("oninput"in a&&(g+=" input"),L&&(g+=" keyup propertychange cut"))}break;case"SELECT":a.multiple&&(l=function(){for(var b=[],c=0,d=a.options.length;d>c;c++)a.options[c].selected&&b.push(a.options[c].value);e.set(f.$$getKeyPath(),b)},k=function(){for(var d=c.$$getData(b),e=0,f=a.options.length;f>e;e++)a.options[e].selected=d&&-1!==d.indexOf(a.options[e].value)}),i=i&&!n(a[h])}f.$$watchers.push(k),g.split(/\s+/g).forEach(function(b){E(a,b,l),D(a,b,l)}),a.removeAttribute(I),a[h]&&i&&l()}function k(){this.$$path="",this.$$watchers=[],this.$$conditioners=[],this.$$repeaters=[]}function l(a,b){var c,d,e=["$$repeaters","$$conditioners","$$watchers"];if(b){for(var f=0,g=e.length;g>f;f++){c=a[e[f]];for(var h=0,i=c.length;i>h;h++)d=c[h],d.el&&b.contains(d.el)&&(c.splice(h,1),h--,i--)}for(var j in a)j in k.prototype||l(a[j],b)}}function m(a,c,d){var e,f,g;for(var h in c)e=a[h],f=c[h],a!==f&&"__ant__"!==h&&(w(f)||Array.isArray(f)?(g=Array.isArray(f)?e&&Array.isArray(e)?e:[]:e||{},a[h]=m(g,f,d&&d.$$getChild(h,!Array.isArray(g)))):a[h]=f);return Array.isArray(a)&&(d&&(a.__ant__=d),a.push!==Q.push&&b(a,Q)),a}function n(a){return M.lastIndex=0,a&&M.test(a)}function o(a,b){var c,d,e,f=[],g=[],h=0,i=a.nodeValue;for(3===a.nodeType?d="text":2===a.nodeType&&(d="attr",e=a.nodeName,0===e.indexOf(F)&&(e=a.nodeName.slice(F.length)),n(e)&&(i=e)),M.lastIndex=0;c=M.exec(i);)M.lastIndex-h>c[0].length&&g.push(i.slice(h,M.lastIndex-c[0].length)),f.push({escape:!c[2],path:(c[2]||c[1]).trim(),position:g.length}),g.push(c[0]),h=M.lastIndex;return i.length>h&&g.push(i.slice(h,i.length)),{tokens:f,textMap:g,node:a,type:d,attr:e,el:b}}function p(b,c,d){var e,f=c.position,g=d.node,h=d.el,i=d.type,j=d.textMap,k=d.attr,l=n(g.nodeName);if(b+""!=j[f]+""){if((l?k:g.nodeValue)!==j.join("")&&c.escape)return console.warn("模板内容被修改!"),void 0;if(j[f]=b&&b+"",e=j.join(""),c.escape||"text"!==i)l||(g.nodeValue=e),"text"!==i&&(l?(k&&h.removeAttribute(k),e&&q(h,e,g.nodeValue),d.attr=e):q(h,k,e));else{var m,o=a.createElement("div");c.unescapeNodes=c.unescapeNodes||[],o.innerHTML=e,m=o.childNodes,c.unescapeNodes.forEach(function(a){a.parentNode&&a.parentNode.removeChild(a)}),c.unescapeNodes=[];for(var p=0,r=m.length;r>p;p++)c.unescapeNodes.push(m[p]),g.parentNode.insertBefore(m[p],g),p--,r--;g.nodeValue=""}}}function q(a,b,c){try{b in a&&L?"style"===b&&a.style.setAttribute?a.style.setAttribute("cssText",c):a[b]="boolean"==typeof a[b]?!0:c:a.setAttribute(b,c)}catch(d){}}function r(a,b,c){for(var d=a.__ant__.$$repeaters,e=0,f=d.length;f>e;e++)d[e][b].apply(d[e],c);a.__ant__.$$root.$$ant.trigger("update")}function s(b,c,d,e){var f=a.createTextNode(""),g=e===s.TYPE_IF?G:H;this.path=b.getAttribute(g),b.removeAttribute(g),this.el=b,this.vm=c,this.relativeVm=d,this.type=e,this.relateEl=f,this.els=[],g===G&&i(this.el,d),this.state=this.STATE_READY,b.parentNode.insertBefore(f,b),b.parentNode.removeChild(b)}function t(){}function u(a){return"object"==typeof a&&null!==a}function v(a){return"undefined"==typeof a}function w(a){return!a||"[object Object]"!=={}.toString.call(a)||a.nodeType||a===a.window?!1:!0}function x(a,b,c){return function(){var d=b.apply(this,arguments);return c&&c.call(this,d)?d:a.apply(this,arguments)}}function y(a,b,c){return function(){var d=a.apply(this,arguments);return c&&c.call(this,d)?d:(b.apply(this,arguments),d)}}function z(a,b){return x(a,b,function(a){return a===!1})}function A(a){return a.replace(S,"").split(R)}function B(a,b,c){var d=A(a),e=c;return d.forEach(function(a,c){c===d.length-1?e[a]=b:e&&e.hasOwnProperty(a)?e=e[a]:(e[a]={},e=e[a])}),c}function C(a,b){var c,d,e=b;if(a){c=A(a);for(var f=0,g=c.length;g>f;f++){if(d=c[f],!e||!e.hasOwnProperty(d))return;e=e[d]}}return e}function D(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function E(a,b,c){a.removeEventListener?a.removeEventListener(b,c):a.detachEvent("on"+b,c)}var F,G,H,I,J={on:function(a,b,c){var d=c||this;return d._handlers=d._handlers||{},d._handlers[a]=d._handlers[a]||[],d._handlers[a].push({handler:b,context:c,ctx:d}),this},off:function(a,b,c){var d=c||this,e=d._handlers;if(a&&e[a])if("function"==typeof b)for(var f=0;f<e[a].length;f++)e[a][f].handler===b&&(e[a].splice(f,1),f--);else e[a]=[];return this},trigger:function(a){var b=this,c=[].slice.call(arguments,1),d=b._handlers;return d&&d[a]&&d[a].forEach(function(a){a.handler.apply(b,c)}),this}},K={extend:function(a,c){var d=this,e=function(){return d.apply(this,arguments)},f=function(){this.constructor=e};return f.prototype=d.prototype,e.prototype=new f,b(e.prototype,a),b(e,d,c),e}};c("a-"),b(d,K,{setPrefix:c,Event:J}),b(d.prototype,J,{update:function(a,b,c){var d,e=this.vm;return u(a)?(c=b,d=b=a):"string"==typeof a?(a=A(a).join("."),v(b)&&(b=this.get(a)),d=B(a,b,{}),e=e.$$getChild(a)):b=this.data,v(c)&&(c=u(a)),f(e,b,c),this.trigger("update",d),this},render:function(a){return this.set(a,{isExtend:!1,silence:!0}),f(this.vm,this.data,!1),this.isRendered=!0,this.trigger("render"),this},clone:function(a){return new this.constructor(this.tpl,b(this.options,a))},get:function(a){return C(a,this.data)},set:function(a,b,c){var d,e,f,g,h;if(!a)return this;if(u(a))d=!0,c=b,c=c||{},c.isExtend!==!1?(e=!0,m(this.data,a,this.vm)):(e=!1,this.data=m({},a,this.vm));else if(c=c||{},C(a,this.data)!==b&&(d=!0),d)if(c.isExtend!==!0){if(g=A(a),g.length>1){if(h=g.pop(),f=C(g.join("."),this.data),v(f))B(g.join("."),f={},this.data);else if(!u(f)){var i=f;B(g.join("."),f={toString:function(){return i}},this.data)}}else f=this.data,h=a;f[h]=u(b)?m(Array.isArray(b)?[]:{},b,this.vm.$$getChild(a,!Array.isArray(b))):b,e=!1}else m(this.data,B(a,b,{}),this.vm),e=!0;return d&&!c.silence&&(u(a)?this.update(a,e):this.update(a,b,e)),this},setPartial:function(c){if(c){this.partials=this.partials||{},c=b({},this.partials[c.name],c);var d,f,g,j=c.name,k=c.node,l=k&&k.parentNode,m=c.content;if(j&&(this.partials[j]=c),m){if(g=this.vm.$$getChild(c.path),c.escape&&!u(m))d=[a.createTextNode(m)],l&&l.insertBefore(d[0],k),i(d[0],g);else{f=e(m,"div").el.childNodes,d=[];for(var n=0,o=f.length;o>n;n++)d.push(f[n]);for(var n=0,o=d.length;o>n;n++)l&&l.insertBefore(d[n],k);h(d,g)}this.isRendered&&g.$$render(C(c.path,this.data))}return this}},parse:function(a){return a},init:t});var L=!!a.attachEvent;k.prototype={$$watchers:null,$$root:null,$$parent:null,$$conditioners:null,$$repeaters:null,$$ant:null,$$data:null,$$path:null,$$updateVM:function(a,b){(n(a.nodeValue)||n(a.nodeName))&&this.$$addWatcher(a,b)},$$getChild:function(a,b){var c,d,e,f=this;if(a+=""){e=a.split(/(?!^)\.(?!$)/);for(var g=0,h=e.length;h>g;g++){if(c=e[g],!f[c]){if(b)return null;d=new k,d.$$parent=f,d.$$root=f.$$root||f,d.$$path=c,f[c]=d}f=f[c]}}return f},$$getKeyPath:function(){for(var a=this.$$path,b=this;(b=b.$$parent)&&b.$$path;)a=b.$$path+"."+a;return a},$$addWatcher:function(b,c){var d=o(b,c),e=d.tokens,f=d.textMap,g=this;"text"===d.type&&f.length>1?(f.forEach(function(d){var e=a.createTextNode(d);c.insertBefore(e,b),g.$$updateVM(e,c)}),c.removeChild(b)):e.forEach(function(a){N(d,g,a)})},$$addGenerator:function(a,b,c){var d=new s(a,this,b,c);return(c===s.TYPE_IF?this.$$conditioners:this.$$repeaters).push(d),d},$$getData:function(a,b){var c=C(a,this.$$data);return!b&&this.$$parent&&v(c)?this.$$parent.$$getData(a):c},$$render:function(a,b){var c,d=this;b?(d.$$data=u(d.$$data)?m(d.$$data,a,this):a,c=a):(d.$$data=a,c=this),this.$$conditioners.forEach(function(a){a.generate()}),this.$$repeaters.forEach(function(a){0!==a.state&&b||a.generate()});for(var e=0,f=this.$$watchers.length;f>e;e++)this.$$watchers[e].call(this);if(u(c))for(var g in c)!d.hasOwnProperty(g)||g in k.prototype||this[g].$$render(!a||v(a[g])?"":a[g],b)}};var M=/{{({([^{}\n]+)}|[^{}\n]+)}}/g,N=function(a,b,c){var d="."===c.path?b:b.$$getChild(c.path);d.$$watchers.push(function(){var e="."===c.path?d.$$data:b.$$getData(c.path);p(e,c,a)})},O=/^\^/;N=z(N,function(a,b,c){var d=c.path,e=d.split(":");if(2===e.length){var f=e[0].trim(),g=f.replace(O,""),h=e[1].trim();return b.$$getChild(g).$$watchers.push(function(){var d=b.$$getData(g),e=(O.test(f)?!d:d)?h:"";p(e,c,a)}),!1}});var P=/^>\s*(?=.+)/;N=z(N,function(b,c,d){var e,f,g,h;return"text"===b.type&&P.test(d.path)?(e=d.path.replace(P,""),f=c.$$root.$$ant,g=f.options,h=a.createTextNode(""),b.el.insertBefore(h,b.node),b.el.removeChild(b.node),f.setPartial({name:e,content:g&&g.partials&&g.partials[e],node:h,escape:d.escape,path:c.$$getKeyPath()}),!1):void 0});var Q={splice:y([].splice,function(){r(this,"splice",arguments)}),push:y([].push,function(){var a=[].slice.call(arguments);a.unshift(this.length-a.length,0),r(this,"splice",a)}),pop:y([].pop,function(){r(this,"splice",[this.length,1])}),shift:y([].shift,function(){r(this,"splice",[0,1])}),unshift:y([].unshift,function(){var a=[].slice.call(arguments);a.unshift(0,0),r(this,"splice",a)}),sort:y([].sort,function(){r(this,"sort")}),reverse:y([].reverse,function(){r(this,"reverse")})};b(s,{TYPE_REPEAT:"repeat",TYPE_IF:"if",isGenTempl:function(a){return a&&a.hasAttributes&&a.hasAttributes(H)||a.hasAttributes(G)}}),s.prototype={STATE_READY:0,STATE_GENEND:1,generate:function(){var a=this,b=this.relativeVm.$$getData(this.path.replace(O,""));if(a.type===s.TYPE_REPEAT){if(b&&!Array.isArray(b))return console.warn("需要一个数组"),void 0;b&&this.splice.apply(this,[0,this.els.length].concat(b))}else O.test(this.path)&&(b=!b),b?a.lastIfState||a.relateEl.parentNode.insertBefore(a.el,a.relateEl):a.lastIfState&&a.el.parentNode.removeChild(a.el),a.lastIfState=b;a.state=this.STATE_GENEND},splice:function(b,c){var d,e,f=this.els,g=[].slice.call(arguments),h=g.slice(2),j=h.length,k=[],m=a.createDocumentFragment(),n=this.relateEl.parentNode;v(c)&&(g[1]=c=f.length-b);for(var o=b,p=f.length;p>o;o++)if(b+c>o)try{n.removeChild(f[o])}catch(q){}else{if(!j&&!c)break;f[o][F+"index"]=o-c+j,e=this.vm[o-c+j]=this.vm[o],e.$$path=o-c+j}for(var r=0;j>r;r++)d=this.el.cloneNode(!0),e=this.vm.$$getChild(b+r),l(e,f[b+r]),d[F+"index"]=b+r,m.appendChild(d),i(d,e),e.$$render(h[r]),k.push(d);k.length&&n.insertBefore(m,f[b+c]||this.relateEl);for(var s=p-c+j;p>s;s++)delete this.vm[s];g=g.slice(0,2).concat(k),f.splice.apply(f,g),c!==j&&this.vm.$$getChild("length").$$render(f.length)},reverse:function(){for(var b,c=this.vm,d=this.relateEl,e=a.createDocumentFragment(),f=0,g=this.els.length;g>f;f++).5>f&&(b=c[f],c[f]=c[g-f-1],c[f].$$path=f,b.$$path=g-f-1,c[g-f-1]=b),this.els[f][F+"index"]=g-f-1,e.appendChild(this.els[g-f-1]);d.parentNode.insertBefore(e,d),this.els.reverse()},sort:function(){this.generate()}};var R=/(?:\.|\[)/g,S=/\]/g;return d}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),function(a,b){a.Ant=a.Ant.extend({on:function(a,c){c=c||function(){};var d=c.bind(this),e=a.trim().split(/\s+/);return e.push(d),b(this.el).on.apply(b(this.el),e),c.guid=d.guid,this},trigger:function(a,c,d){return("render"===a||"update"===a)&&(d=!0),b.event.trigger(a,c,this.el,d),this},off:function(a,c){var d=a.trim().split(/\s+/);return d.push(c),b(this.el).off.apply(b(this.el),d),this}})}(this,jQuery),function(a,b){var c=b(a),d=function(a){var d={},e=function(){var a,b,c=h.queryParse(location.hash),e=c.params=[];for(var f in d)if(b=d[f],a=b.reg.exec(c.path)){for(var g=1,i=a.length;i>g;g++){var j=b.keys[g-1],k=decodeURIComponent(a[g]);j?e[j.name]=k:e.push(k)}this.trigger(f,c)}},f=b.extend({},a,{on:function(b,c){if(!d[b]){var e=[];d[b]={reg:g(b,e,!0,!0),keys:e}}return a.on.call(this,b,c),this},off:function(b){return a.off.apply(this,arguments),this._handlers[b]&&this._handlers[b].length||delete d[b],this},navigate:function(a){return location.hash=a,this},route:function(a){for(var b in a)this.on(b,a[b]);return this},start:function(a){this.stop();var b=e.bind(this);return c.on("hashchange",b),e.guid=b.guid,this.route(a),c.trigger("hashchange"),this},stop:function(){return c.off("hashchange",e),this}}),g=function(a,b,c,d){return"[object RegExp]"=={}.toString.call(a)?a:(Array.isArray(a)&&(a="("+a.join("|")+")"),a=a.concat(d?"":"/?").replace(/\/\(/g,"(?:/").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?/g,function(a,c,d,e,f,g,h){return b.push({name:e,optional:!!g}),c=c||"",(g?"":c)+"(?:"+(g?c:"")+(d||"")+(f||d&&"([^/.]+?)"||"([^/]+?)")+")"+(g||"")+(h?"(/*)?":"")}).replace(/([\/.])/g,"\\$1").replace(/\*/g,"(.*)"),new RegExp("^"+a+"$",c?"":"i"))},h=function(){var a=function(b,c){b=b||location.href;for(var d=/(?:(\w+\:)\/\/)?([^\/]+)?(\/[^?#]*)?(\?[^#]*)?(#.*)?/,e=b.match(d),f={},g=["href","protocal","host","pathname","search","hash"],h=0,i=g.length;i>h;h++)f[g[h]]=e[h]||"";return f.hostname=f.host,f.pathname=f.pathname||"/",f.paths=a.pathParse(f.pathname),c&&(f.searchobj=a.queryParse(f.search),f.hashobj=a.queryParse(f.hash)),f};return a.queryParse=function(){var b=/#?([^?]*)(\?.*)?$/,c=function(c){var d,e,f=c.match(b),g={};if(g.path=f[1],g.search=f[2],g.paths=f[1]&&a.pathParse(f[1]),g.search){d=g.search.slice(1).split("&"),e={};for(var h=0;h<d.length;h++){var i=d[h].split("=");e[i[0]]=i[1]}g.searchObj=e}return g};return c}(),a.pathParse=function(a){return a.replace(/(^\/|\/$)/,"").split("/")},a}();return f}(Ant.Event);a.Ant=a.Ant.extend({},{router:d})}(this,jQuery);