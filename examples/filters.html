<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Filters in ant.js</title>
  <script type="text/javascript" src="../dist/ant.js"></script>
  <script type="text/javascript" src="../extensions/filters.js"></script>
</head>
<body>
	<div id=template>
    <div>
      <h1>常用的 filters: </h1>
      <p>首字母大写: {{text | capitalize}} 
        <br />
        <input type='text' value='antjs' a-model={{text}} />
      </p>
      <p>EncodedURL: {{url|urlEncode|ellipsis:5}}</p>
      <p>默认值: {{undefined | defaults:'Default value'}}</p>
      <!-- <p>补充字符串省略号: {{longStr | ellipsis : 7}}</p> -->
      <input type="text" value="这里是一大段文字" a-model={{longStr}}>
    </div>
    <div a-style='{{money | color}}'>
      <h2>自定义 filters : </h2>
      <div>
        You got {{ money | rmb : type }} !!  
      </div>
      <div>
        <input value=50 type="range" a-model={{money}} min=0 max=100 autofocus /> 
        <label>$: <input type="radio" name=type a-model='{{type }}' value='dol' checked /></label>
        <label>￥: <input type="radio" name=type a-model='{{ type }}' value='rmb' /></label>
      </div>
    </div>
  </div>
<script type="text/javascript">
  var ant = new Ant(document.getElementById('template'), {
      data: { rate: 6.084, url: location.href }
    //You can write filters here, just like events
    , filters: {
        rmb: function(money, type){
          return type === 'rmb' ? '￥ ' + (money * this.data.rate).toFixed(2) : '$ ' + money;
        }
      , color: function(val) {
          var r, g;
          if(val <= 50){
            r = 'ff';
            g = prefixO(Math.round((2.55 * 2 * val)).toString(16), 2)
          }else{
            r = prefixO(Math.round((2.55 * 2 * (100 - val))).toString(16), 2);
            g = prefixO(Math.round(127 + (1.28 * 2 * (100 - val))).toString(16), 2)
          }
          return 'background-color: #' + r + g + '00';
        }
      }
    });
  
  function prefixO(str) {
    return str.length < 2 ? ('0' + str) : str;
  }
</script>
</body>
</html>